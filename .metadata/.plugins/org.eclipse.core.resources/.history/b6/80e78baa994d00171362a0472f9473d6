package com.sanchit;

import java.rmi.RemoteException;

import javax.xml.rpc.ServiceException;

import org.apache.axis.AxisFault;

import localhost.MeditabServer.InMessage;
import localhost.MeditabServer.MeditabServerProxy;
import localhost.MeditabServer.MeditabServerSOAPStub;
import localhost.MeditabServer.MeditabServer_ServiceLocator;

/**
 * Hello world!
 *
 */
public class App 
{
    public static void main( String[] args )
    {
        try {
        	
        	MeditabServer_ServiceLocator locator = new MeditabServer_ServiceLocator();
        	try {	
        			
        			String soapAddress = locator.getMeditabServerSOAPAddress();
        			String soapName = locator.getMeditabServerSOAPWSDDServiceName();
        			
					locator.setEndpointAddress(soapName, soapAddress);
					
			} catch (ServiceException e1) {
				// TODO Auto-generated catch block
				e1.printStackTrace();
			}
			
        	MeditabServerSOAPStub stub = new MeditabServerSOAPStub(locator);
			
			try {
				InMessage[] message = stub.queryInBoxMessages("5565657", "", "", "", "", "", "", "", "N", "", "", "", "", "", "", "", "");
				
				
				
				InMessage messageContent = message[4];
				
				String messageID = messageContent.getMessageID();
				
				System.out.println(messageID);
				
			} catch (RemoteException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			
		} catch (AxisFault e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
    }
}
